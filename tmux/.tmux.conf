##### 0. Optional: reset / shared settings ####################################
# If you keep common settings in a separate file, load them here.
# Comment this out if you don't use it.
#source-file "$HOME/.config/tmux/tmux.reset.conf"

##### 1. Terminal & colours ###################################################

# Use a widely-available terminfo inside tmux.
# (screen-256color is very portable; good for WSL + Linux + SSH)
set-option -g default-terminal "screen-256color"

# Enable truecolour (RGB) when the outer terminal reports xterm-256color
# This works well for Windows Terminal / WezTerm / most modern emulators. :contentReference[oaicite:0]{index=0}
set-option -ga terminal-overrides ',xterm-256color:RGB'


##### 2. Core behaviour & ergonomics ##########################################

# Use Ctrl-a as prefix (like GNU screen)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Start window & pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Do not kill the entire session when a single window dies
set -g detach-on-destroy off

# Make key sequences feel instant
set -g escape-time 0

# Big scrollback history
set -g history-limit 1000000

# Keep window numbers contiguous when you close some of them
set -g renumber-windows on

# Use system clipboard where supported (WSL/Wayland/X11)
set -g set-clipboard on

# Put status bar at the top (macOS-style; works everywhere)
set -g status-position bottom

# Use vim-style keys in copy / scrollback mode
setw -g mode-keys vi

# Visual borders around panes
set -g pane-active-border-style 'fg=magenta,bg=default'
set -g pane-border-style        'fg=brightblack,bg=default'


##### 3. tmux-fzf-url configuration ###########################################

# tmux-fzf-url: fuzzy-pick URLs from the current pane :contentReference[oaicite:1]{index=1}
set -g @fzf-url-fzf-options '-p 60%,30% --prompt="   " --border-label=" Open URL "'
set -g @fzf-url-history-limit '2000'


##### 4. TPM (Tmux Plugin Manager) plugins ####################################

# Tmux Plugin Manager itself :contentReference[oaicite:2]{index=2}
set -g @plugin 'tmux-plugins/tpm'

# Sensible default settings
set -g @plugin 'tmux-plugins/tmux-sensible'

# Copy to system clipboard easily
set -g @plugin 'tmux-plugins/tmux-yank'

# Save/restore sessions
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'
set -g @resurrect-strategy-nvim 'session'

# Better selection in panes
set -g @plugin 'fcsonline/tmux-thumbs'

# fzf-based tmux navigator (prefix + F by default) :contentReference[oaicite:3]{index=3}
set -g @plugin 'sainnhe/tmux-fzf'

# Fuzzy URL opener (prefix + u by default) :contentReference[oaicite:4]{index=4}
set -g @plugin 'wfxr/tmux-fzf-url'

# Catppuccin-style statusline / theme (Omer’s fork with extras)
set -g @plugin 'omerxx/catppuccin-tmux'

# Session manager (SessionX) :contentReference[oaicite:5]{index=5}
set -g @plugin 'omerxx/tmux-sessionx'

# Floating pane plugin (Floax) :contentReference[oaicite:6]{index=6}
set -g @plugin 'omerxx/tmux-floax'


##### 5. Floax (floating pane) settings #######################################

# Size & look of floating pane
set -g @floax-width  '80%'
set -g @floax-height '80%'

set -g @floax-border-color 'magenta'
set -g @floax-text-color   'blue'

# Keybinding: <prefix> + p to toggle Floax
set -g @floax-bind 'p'

# When opening Floax, change path to the currently active pane's path
set -g @floax-change-path 'true'


##### 6. SessionX (session manager) settings ##################################

# Open new zoxide-powered window with Ctrl-y
set -g @sessionx-bind-zo-new-window 'ctrl-y'

# Do not auto-accept previews; wait for confirmation
set -g @sessionx-auto-accept 'off'

# Where SessionX looks for “project roots”.
# Use $HOME so it works on WSL + Linux without hard-coded /Users path.
set -g @sessionx-custom-paths "$HOME/dotfiles"

# Main SessionX keybinding: <prefix> + o
set -g @sessionx-bind 'o'

# Where to put the SessionX “X window”
set -g @sessionx-x-path "$HOME/dotfiles"
set -g @sessionx-window-height '85%'
set -g @sessionx-window-width  '75%'

# Enable zoxide integration if you have zoxide installed
set -g @sessionx-zoxide-mode 'on'

# Do not recurse into subdirs when scanning custom paths
set -g @sessionx-custom-paths-subdirectories 'false'

# Show sessions from all paths, not only current
set -g @sessionx-filter-current 'false'


##### 7. Catppuccin tmux theme settings #######################################

# Window separators and layout
set -g @catppuccin_window_left_separator   ""
set -g @catppuccin_window_right_separator  " "
set -g @catppuccin_window_middle_separator " █"

set -g @catppuccin_window_number_position "right"
set -g @catppuccin_window_default_fill    "number"
set -g @catppuccin_window_default_text    "#W"
set -g @catppuccin_window_current_fill    "number"
set -g @catppuccin_window_current_text    "#W#{?window_zoomed_flag,(),}"

# Statusline modules
set -g @catppuccin_status_modules_right "directory"   # ,date_time if you want
set -g @catppuccin_status_modules_left  "session"

set -g @catppuccin_status_left_separator           " "
set -g @catppuccin_status_right_separator          " "
set -g @catppuccin_status_right_separator_inverse  "no"
set -g @catppuccin_status_fill                     "icon"
set -g @catppuccin_status_connect_separator        "no"

# Show current pane path in the right side
set -g @catppuccin_directory_text "#{b:pane_current_path}"

# Optional extra segments (uncomment when you add scripts)
# set -g @catppuccin_meetings_text "#($HOME/.config/tmux/scripts/cal.sh)"
# set -g @catppuccin_date_time_text "%H:%M"


##### 8. TPM bootstrap (must stay at the very bottom) #########################

run -b '~/.tmux/plugins/tpm/tpm'
